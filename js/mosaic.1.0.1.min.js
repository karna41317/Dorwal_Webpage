(function(b){if(!b.omr){b.omr=new Object()}b.omr.mosaic=function(f,a){var e=this;e.$el=b(f);e.el=f;e.$el.data("omr.mosaic",e);e.init=function(){e.options=b.extend({},b.omr.mosaic.defaultOptions,a);e.load_box()};e.load_box=function(){if(e.options.preload){b(e.options.backdrop,e.el).hide();b(e.options.overlay,e.el).hide();b(window).load(function(){if(e.options.options.animation=="fade"&&b(e.options.overlay,e.el).css("opacity")==0){b(e.options.overlay,e.el).css("filter","alpha(opacity=0)")}b(e.options.overlay,e.el).fadeIn(200,function(){b(e.options.backdrop,e.el).fadeIn(200)});e.allow_hover()})}else{b(e.options.backdrop,e.el).show();b(e.options.overlay,e.el).show();e.allow_hover()}};e.allow_hover=function(){switch(e.options.animation){case"fade":b(e.el).hover(function(){b(e.options.overlay,e.el).stop().fadeTo(e.options.speed,e.options.opacity)},function(){b(e.options.overlay,e.el).stop().fadeTo(e.options.speed,0)});break;case"slide":startX=b(e.options.overlay,e.el).css(e.options.anchor_x)!="auto"?b(e.options.overlay,e.el).css(e.options.anchor_x):"0px";startY=b(e.options.overlay,e.el).css(e.options.anchor_y)!="auto"?b(e.options.overlay,e.el).css(e.options.anchor_y):"0px";var c={};c[e.options.anchor_x]=e.options.hover_x;c[e.options.anchor_y]=e.options.hover_y;var d={};d[e.options.anchor_x]=startX;d[e.options.anchor_y]=startY;b(e.el).hover(function(){b(e.options.overlay,e.el).stop().animate(c,e.options.speed)},function(){b(e.options.overlay,e.el).stop().animate(d,e.options.speed)});break}};e.init()};b.omr.mosaic.defaultOptions={animation:"fade",speed:150,opacity:1,preload:0,anchor_x:"left",anchor_y:"bottom",hover_x:"0px",hover_y:"0px",overlay:".mosaic-overlay",backdrop:".mosaic-backdrop"};b.fn.mosaic=function(a){return this.each(function(){(new b.omr.mosaic(this,a))})}})(jQuery);